## 14. Нормализация отношений. Функциональные зависимости атрибутов. Аномалии модификации.

### Ответ:

Нормализация -- это процесс оптимизации структуры реляционной базы данных,  направленный на устранение избыточности данных и повышение их целостности.  Она базируется на концепции **функциональных зависимостей** между атрибутами.

**Функциональная зависимость (ФЗ):**

* **Определение:**  Атрибут B **функционально зависит** от атрибута A (A → B),  если каждому значению A соответствует **не более одного** значения B. 
* **Пример:** В таблице "Студенты"  с  атрибутами "НомерСтудБилета", "ФИО", "Группа"  атрибут "ФИО" функционально зависит от "НомерСтудБилета",  поскольку  у  каждого  студента  только  одно  ФИО.

**Транзитивная зависимость:**

* **Определение:**  Атрибут C **транзитивно зависит** от атрибута A (A → C),  если существует атрибут B,  такой что A → B и B → C.
* **Пример:**  Если в  таблице  "Сотрудники"  с  атрибутами  "ТабельныйНомер",  "Отдел",  "Зарплата"  атрибут  "Отдел"  определяет  "Зарплату",  то  "Зарплата"  транзитивно  зависит  от  "ТабельныйНомер".

**Аномалии модификации:**

Избыточность данных,  вызванная  нарушением  нормальных  форм,  может  приводить  к  **аномалиям  модификации**,  которые  усложняют  обновление,  вставку  и  удаление  данных:

* **Аномалия обновления:** Изменение  одного  значения  может  потребовать  изменения  многих  строк.  Например,  если  в  таблице  "Сотрудники"  хранится  название  отдела  и  зарплата  для  каждого  сотрудника,  то  изменение  зарплаты  для  всех  сотрудников  одного  отдела  потребует  обновления  многих  строк.
* **Аномалия вставки:**  Невозможность  добавить  новую  запись  без  ввода  данных,  не  связанных  с  основной  сущностью.  Например,  если  в  таблице  "Книги"  хранится  информация  об  авторах,  то  невозможно  добавить  новую  книгу,  не  указав  автора.
* **Аномалия удаления:**  Удаление  одной  записи  может  привести  к  потере  информации  о  другой  сущности.  Например,  если  в  таблице  "Книги"  хранится  информация  об  авторах,  то  удаление  последней  книги  определенного  автора  приведет  к  потере  информации  об  этом  авторе.

**Нормализация отношений:**

* **Цель:**  Устранить  избыточность  данных  и  аномалии  модификации.
* **Метод:**  Последовательное  приведение  отношений  к  **нормальным  формам**  (НФ).

**Нормальные формы:**

* **1NF (Первая нормальная форма):**  В  отношении  нет  повторяющихся  групп  атрибутов,  все  значения  атомарны.
* **2NF (Вторая нормальная форма):**  Отношение  находится  в  1NF,  и  все  неключевые  атрибуты  полностью  зависят  от  первичного  ключа.
* **3NF (Третья нормальная форма):**  Отношение  находится  в  2NF,  и  нет  транзитивных  зависимостей  неключевых  атрибутов  от  первичного  ключа.
* **BCNF (Нормальная форма Бойса-Кодда):**  Более  строгая  форма  3NF,  где  каждый  детерминант  является  кандидатом  в  ключи.
* **4NF (Четвертая нормальная форма):**  Отношение  находится  в  BCNF,  и  нет  многозначных  зависимостей.
* **5NF (Пятая нормальная форма):**  Отношение  находится  в  4NF,  и  его  нельзя  разложить  на  отношения  меньшей  степени  без  потери  информации.

**Важно:** 

* Нормализация  до  более  высоких  нормальных  форм  уменьшает  избыточность,  но  может  усложнить  запросы.
* На  практике  чаще  всего  используют  нормализацию  до  3NF,  достигая  баланса  между  целостностью  данных  и  производительностью  запросов.
