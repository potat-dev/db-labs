## Проектирование реляционных БД на основе принципов нормализации

### Системный анализ предметной области

Цель данного этапа - получить формализованное описание объектов предметной области и связей между ними для последующего проектирования базы данных. 

**Задачи:**

* Подробное описание объектов предметной области и их взаимосвязей.
* Определение информации об объектах, которая должна храниться в БД.
* Формулировка задач, решаемых с помощью БД, и описание алгоритмов их решения.
* Описание входных и выходных документов системы.

**Пример описания предметной области:**

Рассмотрим задачу разработки информационной системы для автоматизации учета книг в библиотеке.

**Объекты предметной области:**

* **Книги:** Шифр (ISBN, уникальный), название, авторы, место издания, издательство, год издания, количество страниц, стоимость, количество экземпляров.
* **Экземпляры книг:** Инвентарный номер (уникальный), шифр книги, место размещения.
* **Читатели:** Номер читательского билета (уникальный), фамилия, имя, отчество, адрес, телефон (рабочий, домашний), дата рождения.
* **Области знаний:**  Номер (уникальный), наименование.
* **Выдача книг:**  Номер читательского билета, инвентарный номер книги, дата выдачи, дата возврата.

**Связи между объектами:**

* Книга может иметь несколько авторов, и один автор может написать несколько книг (многие-ко-многим).
* Книга может относиться к нескольким областям знаний, и одна область знаний может содержать много книг (многие-ко-многим).
* У каждой книги может быть несколько экземпляров (один-ко-многим).
* Читатель может взять несколько книг, и каждая книга может быть выдана нескольким читателям (многие-ко-многим).

**Ограничения:**

* Возраст читателей не менее 17 лет.
* Год издания книг - с 1960 по текущий год.
* Читатель может иметь не более 5 книг одновременно.
* Читатель должен предоставить хотя бы один телефон.
* Списание книг возможно только при отсутствии выданных экземпляров.

**Пользователи системы:**

* Библиотекари: регистрация книг, выдача/прием книг, списание книг.
* Читатели: просмотр каталога, поиск книг, получение информации о наличии книг.
* Администрация: получение отчетности, управление пользователями.

## Инфологическое моделирование

### Модель "сущность-связь" (ER-модель)

ER-модель - стандартный инструмент для инфологического моделирования БД.

**Основные понятия:**

* **Сущность:** Класс однотипных объектов. 
   * Имеет имя, уникальное в системе.
   *  Имеет атрибуты - характеристики объектов.
   * **Ключевой атрибут:** Атрибут или набор атрибутов, однозначно идентифицирующий экземпляр сущности.
* **Связь:** Отношение между сущностями, показывающее, как они соотносятся.
  * **Типы связей по множественности:**
     * **Один-к-одному (1:1):**  Экземпляр одной сущности связан только с одним экземпляром другой сущности.
     * **Один-ко-многим (1:M):** Один экземпляр одной сущности может быть связан с несколькими экземплярами другой сущности.
     * **Многие-ко-многим (M:M):** Один экземпляр одной сущности может быть связан с несколькими экземплярами другой, и наоборот.

#### Пример модели "сущность-связь" (на основе примера библиотеки)

```
[Книга] --- M:N --- [Автор]
       |
       1:N
       |
[Экземпляр книги] --- 1:N --- [Выдача книги] --- 1:N --- [Читатель]
                                                  |
                                                  N:1
                                                  |
                                               [Библиотекарь]
```

**Описание ER-диаграммы:**

* **Сущности:** Книга, Автор, Экземпляр книги, Выдача книги, Читатель, Библиотекарь.
* **Связи:** 
    * Книга - Автор (M:N): Одна книга может иметь несколько авторов, и один автор может написать несколько книг.
    * Книга - Экземпляр книги (1:N): У каждой книги может быть несколько экземпляров.
    * Экземпляр книги - Выдача книги (1:N): Один экземпляр книги может быть выдан несколько раз.
    * Выдача книги - Читатель (1:N):  Один читатель может взять несколько книг.
    * Выдача книги - Библиотекарь (N:1): Несколько выданных книг могут быть оформлены одним библиотекарем.
